<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test slovÃ­Äek</title>
    <meta name="description" content="Aplikace pro testovÃ¡nÃ­ slovÃ­Äek ÄeÅ¡tina-angliÄtina">
    <meta name="theme-color" content="#2196f3">
    
    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">
   
    <!-- Apple specific -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Test slovÃ­Äek">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <link rel="stylesheet" href="styles.css">
    <style>
        .input-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .number-input {
            width: 120px;
            padding: 8px;
            border: 2px solid #2196f3;
            border-radius: 5px;
            font-size: 16px;
        }
        .number-input:disabled {
            background-color: #f0f0f0;
            border-color: #cccccc;
        }
        .select-input {
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- HlavnÃ­ navigace -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-screen="test">ğŸ“ Test</button>
            <button class="nav-btn" data-screen="vocabulary">ğŸ“š SlovÃ­Äka</button>
            <button class="nav-btn" data-screen="camera">ğŸ“· PÅ™idat</button>
            <button class="nav-btn" data-screen="stats">ğŸ“Š Statistiky</button>
        </nav>

        <!-- Screen: Test -->
        <div id="test-screen" class="screen active">
            <div id="test-setup">
                <h2>ğŸ¯ NastavenÃ­ testu</h2>
                <div class="setting-group">
                    <label>PoÄet otÃ¡zek:</label>
                    <div class="input-container">
                        <input type="number" id="customQuestionCount" class="number-input" min="1" max="100" placeholder="Zadejte ÄÃ­slo" oninput="updateQuestionCount()">
                        <select id="questionCount" class="select-input" onchange="updateInputState()">
                            <option value="5">5 otÃ¡zek</option>
                            <option value="10" selected>10 otÃ¡zek</option>
                            <option value="20">20 otÃ¡zek</option>
                            <option value="50">50 otÃ¡zek</option>
                            <option value="custom">VlastnÃ­ poÄet</option>
                            <option value="all">VÅ¡echna slovÃ­Äka</option>
                        </select>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>SmÄ›r pÅ™ekladu:</label>
                    <select id="direction" class="select-input">
                        <option value="cs-en">ğŸ‡¨ğŸ‡¿ â†’ ğŸ‡¬ğŸ‡§ ÄŒeÅ¡tina â†’ AngliÄtina</option>
                        <option value="en-cs">ğŸ‡¬ğŸ‡§ â†’ ğŸ‡¨ğŸ‡¿ AngliÄtina â†’ ÄŒeÅ¡tina</option>
                        <option value="mix">ğŸ”€ Mix obou smÄ›rÅ¯</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>Typ testu:</label>
                    <select id="testType" class="select-input">
                        <option value="input">âœï¸ PsanÃ­ odpovÄ›di</option>
                        <option value="choice">âœ… VÃ½bÄ›r z moÅ¾nostÃ­</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" onclick="startTest()">ğŸš€ ZaÄÃ­t test</button>
            </div>
            
            <div id="test-active" style="display:none;">
                <div class="test-header">
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="question-counter" id="questionCounter"></div>
                    <div class="score-display" id="currentScore">SkÃ³re: 0</div>
                </div>
                
                <div class="question-card">
                    <div class="question-text" id="questionText"></div>
                    <div class="question-direction" id="questionDirection"></div>
                </div>
                
                <div id="inputAnswer" class="answer-section">
                    <input type="text" class="answer-input" id="answerInput" 
                           placeholder="Zadejte pÅ™eklad..." autocomplete="off">
                    <button class="btn btn-primary" onclick="checkAnswer()">OdpovÄ›dÄ›t</button>
                </div>
                
                <div id="choiceAnswer" class="answer-section" style="display:none;">
                    <div class="choice-buttons" id="choiceButtons"></div>
                </div>
                
                <div id="feedback" class="feedback"></div>
                
                <div class="test-controls">
                    <button class="btn btn-secondary" onclick="skipQuestion()">â­ï¸ PÅ™eskoÄit</button>
                    <button class="btn btn-danger" onclick="endTest()">âŒ UkonÄit</button>
                </div>
            </div>
            
            <div id="test-results" style="display:none;">
                <div class="results-card">
                    <h2>ğŸ‰ VÃ½sledky testu</h2>
                    <div class="score-big" id="finalScore"></div>
                    <div class="score-details" id="scoreDetails"></div>
                    <div class="wrong-answers" id="wrongAnswers"></div>
                    <div class="results-actions">
                        <button class="btn btn-primary" onclick="restartTest()">ğŸ”„ NovÃ½ test</button>
                        <button class="btn btn-secondary" onclick="reviewMistakes()">ğŸ“– ProjÃ­t chyby</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Screen: Vocabulary Management -->
        <div id="vocabulary-screen" class="screen">
            <div class="screen-header">
                <h2>ğŸ“š SprÃ¡va slovÃ­Äek</h2>
                <div class="vocab-stats" id="vocabStats"></div>
            </div>
            
            <div class="search-container">
                <input type="text" id="searchVocab" placeholder="ğŸ” Hledat slovÃ­Äko..." 
                       class="search-input" oninput="filterVocabulary()">
            </div>
            
            <div class="vocabulary-list" id="vocabularyList"></div>
            
            <div class="add-vocab-form">
                <h3>â• PÅ™idat novÃ© slovÃ­Äko</h3>
                <input type="text" id="newCzech" placeholder="ÄŒeskÃ© slovo" class="form-input">
                <input type="text" id="newEnglish" placeholder="English word" class="form-input">
                <button class="btn btn-primary" onclick="addVocabulary()">PÅ™idat</button>
            </div>
        </div>

   


        <!-- Screen: Camera/OCR -->
        <div id="camera-screen" class="screen">
            <div class="screen-header">
                <h2>ğŸ“· PÅ™idat z fotky</h2>
                <p>Vyfotografujte slovÃ­Äka a aplikace je automaticky rozpoznÃ¡</p>
            </div>
            
            <div class="camera-container">
                <video id="camera" autoplay playsinline style="display:none;"></video>
                <canvas id="canvas" style="display:none;"></canvas>
                <div id="cameraPreview" class="camera-preview">
                    <div class="camera-placeholder">
                        <div class="camera-icon">ğŸ“·</div>
                        <p>KliknÄ›te pro spuÅ¡tÄ›nÃ­ kamery</p>
                    </div>
                </div>
            </div>
            
            <div class="camera-controls">
                <button class="btn btn-primary" id="startCamera" onclick="startCamera()">ğŸ“· Spustit kameru</button>
                <button class="btn btn-success" id="takePhoto" onclick="takePhoto()" style="display:none;">ğŸ“¸ Vyfotit</button>
                <button class="btn btn-secondary" id="stopCamera" onclick="stopCamera()" style="display:none;">âŒ Zastavit</button>
            </div>
            
            <input type="file" id="fileInput" accept="image/*" capture="environment" style="display:none;">
            <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">
                ğŸ“ NahrÃ¡t z galerie
            </button>
            
            <div id="ocrResults" class="ocr-results"></div>
        </div>
        
        <!-- Screen: Statistics -->
        <div id="stats-screen" class="screen">
            <div class="screen-header">
                <h2>85 Statistiky</h2>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalWords">0</div>
                    <div class="stat-label">Celkem slovÃ­Äek</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalTests">0</div>
                    <div class="stat-label">DokonÄenÃ½ch testÅ¯</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgScore">0%</div>
                    <div class="stat-label">PrÅ¯mÄ›rnÃ© skÃ³re</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="streak">0</div>
                    <div class="stat-label">DnÅ¯ v Å™adÄ›</div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>ğŸ“ˆ Pokrok v Äase</h3>
                <canvas id="progressChart" width="400" height="200"></canvas>
            </div>
            
            <div class="difficult-words">
                <h3>ğŸ˜° NejtÄ›Å¾Å¡Ã­ slovÃ­Äka</h3>
                <div id="difficultWordsList"></div>
            </div>
        </div>
    </div>

    <!-- PWA Install Banner -->
    <div id="installBanner" class="install-banner" style="display:none;">
        <div class="install-content">
            <span>ğŸ“± Nainstalovat aplikaci?</span>
            <button class="btn btn-primary btn-small" onclick="installPWA()">Instalovat</button>
            <button class="btn btn-secondary btn-small" onclick="dismissInstall()">PozdÄ›ji</button>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>NaÄÃ­tÃ¡nÃ­...</p>
    </div>

    <!-- Tesseract.js na konci pro lepÅ¡Ã­ vÃ½kon -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    <script src="app.js"></script>
    <script>
        // Service Worker registrace
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }

        // Funkce pro vÃ½bÄ›r poÄtu otÃ¡zek
        function updateQuestionCount() {
            const customInput = document.getElementById('customQuestionCount');
            const select = document.getElementById('questionCount');
            if (customInput.value > 0 && customInput.value <= 100) {
                select.value = 'custom';
            }
        }

        function updateInputState() {
            const select = document.getElementById('questionCount');
            const customInput = document.getElementById('customQuestionCount');
            if (select.value === 'all') {
                customInput.disabled = true;
                customInput.value = '';
            } else if (select.value === 'custom') {
                customInput.disabled = false;
                customInput.focus();
            } else {
                customInput.disabled = true;
                customInput.value = '';
            }
        }
    </script>
</body>
</html>
